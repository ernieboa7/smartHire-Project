backend/
   SmartHire/
      Controllers/
      Models/
      Services/
      Repositories/
      Infrastructure/
      Integrations/
      .env
      appsettings.json   <-- the good one
      appsettings.Development.json
      Program.cs
      SmartHire.csproj




ğŸ“˜ EXAM-READY NOTES

ASP.NET Core Architecture explained with Restaurant Analogy

1ï¸âƒ£ Program.cs (Restaurant Manager)
Definition (exam-friendly):
Program.cs is the application entry point that configures services, middleware, routing, and application startup.
Restaurant analogy:

The restaurant manager
Hires staff
Assigns roles
Sets work shifts
Opens doors

Controls how customers move inside

ğŸ“Œ Does NOT:
Cook food
Take orders
Access the database

2ï¸âƒ£ Dependency Injection (DI) â€” Staff Assignment
ğŸ“Œ What is Dependency Injection?

Dependency Injection is a design pattern where objects receive their dependencies from a central container instead of creating them directly.

In Program.cs
builder.Services.AddScoped<ICandidateService, CandidateService>();
Restaurant analogy

ğŸ§‘â€ğŸ’¼ Manager says:

â€œWhenever someone asks for a cook, assign this cook.â€

âœ” Controllers donâ€™t hire staff
âœ” Services donâ€™t hire repositories
âœ” Manager assigns dependencies automatically

3ï¸âƒ£ Scoped vs Singleton â€” Shift Schedules
ğŸ” Singleton
builder.Services.AddSingleton<MongoDbContext>();


Meaning:
One instance for the entire app lifetime

Restaurant analogy:
One store room supervisor for the whole day

âœ” Shared resource
âœ” Efficient for database connections

ğŸ” Scoped
builder.Services.AddScoped<IChatService, ChatService>();


Meaning:
One instance per HTTP request

Restaurant analogy:
Each customer gets their own waiter & cook

âœ” No shared request data
âœ” Safe for web APIs

4ï¸âƒ£ Middleware Order â€” Security & Customer Flow
Middleware = Request pipeline
app.UseCors();
app.UseAuthorization();
app.MapControllers();

Restaurant analogy
Middleware	Real-world meaning
UseCors	Door security (who can enter)
UseAuthorization	ID check (who can order)
MapControllers	Order counters

ğŸ“Œ Order matters
Security must happen before orders are taken.

5ï¸âƒ£ Controllers â€” Order Counters

Definition:
Controllers handle HTTP requests and responses.

Responsibilities:
Receive request
Call service
Return response
Restaurant analogy:
Order counter
Does not cook
Passes order to kitchen

6ï¸âƒ£ Services â€” Kitchen (Business Logic)

Definition:
Services contain business rules and workflows.
Responsibilities:
Validate data
Apply rules
Coordinate repositories and integrations

Restaurant analogy:
Kitchen prepares meals
Decides ingredients
Calls guest chef (OpenAI) if needed

7ï¸âƒ£ Repositories + MongoDB â€” Store Room

Definition:
Repositories handle data access.

Restaurant analogy:
Store room clerk fetches ingredients
MongoDB = fridge + pantry

ğŸ“Œ Services never talk to MongoDB directly â€” only through repositories.

8ï¸âƒ£ OpenAI Client â€” Guest Chef

Definition:
External integration used by services.

Restaurant analogy:
Special guest chef hired for AI dishes
Kitchen doesnâ€™t know how the chef works internally

ğŸ§± CLEAN ARCHITECTURE MAPPING
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Controllers (Presentation) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Services (Application)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Repositories (Data Access) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Infrastructure (Mongo, AI) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Key Clean Architecture rule:

Dependencies always point inward.

âœ” Controllers depend on Services
âœ” Services depend on Interfaces
âœ” Infrastructure depends on nothing above it

ğŸ§© SOLID PRINCIPLES (EXAM GOLD)
S â€“ Single Responsibility

Controller: HTTP only

Service: business logic

Repository: data access
âœ” One job per class

D â€“ Dependency Inversion

Code depends on interfaces, not implementations

IChatService â†’ ChatService


âœ” Easy to replace
âœ” Easy to test

ğŸ§ª WHY DI MAKES TESTING EASY (VERY IMPORTANT)
Without DI âŒ
var service = new ChatService(new MongoDbContext());


Real DB
Hard to test
Slow
Fragile

With DI âœ…
IChatService service = new FakeChatService();


Restaurant analogy:
For training, manager hires a practice chef
No real ingredients wasted

âœ” You can mock repositories
âœ” No real MongoDB
âœ” No real OpenAI calls

ğŸ“Œ This is why interfaces + DI = testability

ğŸ§  ONE-PAGE MEMORY SUMMARY
Program.cs = Restaurant Manager
DI = Staff assignment
Singleton = One staff for whole day
Scoped = One staff per customer
Middleware = Security + flow
Controllers = Order counters
Services = Kitchen
Repositories = Store room clerks
MongoDB = Pantry
OpenAI = Guest chef





Model

The model is the food recipe and ingredient description.
Why:
It describes what the food looks like, what fields it has, and how it is structured â€” not how itâ€™s cooked or served.

Examples in code:
Candidate
Job
ChatSession

ğŸ“Œ Models carry data between the kitchen, counter, and store room.

ğŸ§¾ appsettings.json
appsettings.json is the restaurantâ€™s rulebook and supplier contact list.
Why:
It contains:
Where ingredients come from (MongoDB connection string)
Which guest chef to call (OpenAI settings)
House rules (logging, limits, etc.)

ğŸ“Œ Staff read from it, but do not change it.

ğŸ§  Ultra-short memory hook (exam-ready)
Model = What the food is
appsettings.json = How and where the restaurant gets things